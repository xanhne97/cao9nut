<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>B√†i C√†o LAN</title>
<script src="/socket.io/socket.io.js"></script>
</head>
<body style="font-family:Arial;text-align:center">

<h2>üÉè B√†i C√†o LAN</h2>

<input id="name" placeholder="T√™n b·∫°n">
<button onclick="join()">V√†o b√†n</button>

<div id="players"></div>

<button onclick="deal()">Chia b√†i (ch·ªß b√†n b·∫•m)</button>

<h3>B√†i c·ªßa b·∫°n:</h3>
<div id="cards">Ch∆∞a c√≥</div>
<button onclick="reveal()">L·∫≠t b√†i</button>

<div id="result"></div>

<script>
const socket=io();

function join(){
  let name=document.getElementById("name").value;
  socket.emit("join",name);
}

function deal(){ socket.emit("deal"); }

function reveal(){ socket.emit("reveal"); }

socket.on("players",(list)=>{
  document.getElementById("players").innerHTML=
    "<b>Ng∆∞·ªùi ch∆°i:</b> "+list.map(p=>p.name).join(", ");
});

socket.on("yourCards",(c)=>{
  document.getElementById("cards").innerHTML="üÇ† üÇ† üÇ† (ƒë√£ nh·∫≠n b√†i)";
  window.myCards=c;
});

socket.on("showAll",(players)=>{
  let html="<h3>K·∫øt qu·∫£:</h3>";
  Object.values(players).forEach(p=>{
    html+=`<p>${p.name}: ${p.cards.join("-")} ‚Üí ${p.score==0?"B√π":p.score}</p>`;
  });
  document.getElementById("result").innerHTML=html;
});

socket.on("winner",(w)=>{
  document.getElementById("result").innerHTML+=
    `<h2>üèÜ Th·∫Øng: ${w.winner} (${w.max==0?"B√π":w.max})</h2>`;
});
</script>

</body>
</html>